<!DOCTYPE html>
<html lang="en">
<!--http://heavy_code_industry.gitee.io/code-rework/pro001-javaweb/lecture/chapter04/verse05.html-->
<head>
    <meta charset="UTF-8">
    <title>AxiosTest</title>

    <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

    <!--<script src="https://cdn.jsdelivr.net/npm/vue"></script>-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <!--以通过 https://unpkg.com/vuex@2.0.0 这样的方式指定特定的版本-->
    <script src="https://unpkg.com/vuex@2.0.0/dist/vuex.js"></script>
    <!-- Step1 -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.js"></script>

</head>

<body>
<div id="vuex_store_state">
    <p>{{count}}</p>
</div>


<div id="app">
    <button v-on:click="addData">加1操作</button>
</div>

<br>

<div id="app2">
    <button v-on:click="subData">减1操作</button>
</div>

</body>


<script>
    var store = new Vuex.Store({
        state: {
            count: 1
        }
        ,
        mutations: {
            // set方法
            addCount(state) {
                state.count++;
            },
            subCount(state) {
                state.count--;
            }
        },
        actions: {},
        getters: {}
    });


    var vuex_store_state = new Vue({
        el: '#vuex_store_state',
        data: {
            count: store.state.count,
        }

    });

    function addOp() {
        store.commit('addCount');
        vuex_store_state.count = store.state.count;
    }

    function subOp() {
        store.commit('subCount');
        vuex_store_state.count = store.state.count;
    }

    var app = new Vue({
        el: '#app',
        methods: {
            // 写法一
            // addData(){
            //     store.commit('addCount');
            //     vuex_store_state.count = store.state.count;
            // }

            // 写法二
            "addData": addOp
        }
    });

    var app2 = new Vue({
        el: '#app2',
        methods: {
            // 写法一
            // subData(){
            //     store.commit('subCount');
            //     vuex_store_state.count = store.state.count;
            // }

            // 写法二
            "subData": subOp
        }
    });

</script>

</html>
